# Подзадачи

**Подзадачи** - это не целевые действия а вспомогательные действия, направленные на поддержание бесперебойной работы задач так и хода эмуляции в целом. Примеры: разгадывание капчи, проверка аккаунта на бан анализируя данные страницы, запись информации в базу данных (к примеру excel или mySql), запись лога, подготовка файлов и папок, парсинг статистики и т.д.

{% tabs %}
{% tab title="Задачи в PM" %}
<figure><img src="../../../.gitbook/assets/Подзадачи (1).png" alt=""><figcaption></figcaption></figure>
{% endtab %}

{% tab title="Задачи в VS" %}
<figure><img src="../../../.gitbook/assets/Подзадача VS.png" alt=""><figcaption></figcaption></figure>
{% endtab %}

{% tab title="Настройки подзадач" %}
<figure><img src="../../../.gitbook/assets/Подзадачи.png" alt=""><figcaption></figcaption></figure>
{% endtab %}
{% endtabs %}

## <mark style="color:blue;">Лист "Подзадачи"</mark>

Подзадачи могут выполняться в начале сессии, до задачи, после задачи, в конце сессии.

В каждый блок, можно добавлять неограниченное количество подзадач, расширяя вниз каждый из блоков.

{% tabs %}
{% tab title="Подзадачи" %}
<figure><img src="../../../.gitbook/assets/Подзадачи doc.png" alt=""><figcaption></figcaption></figure>
{% endtab %}

{% tab title="Лист" %}
<figure><img src="../../../.gitbook/assets/Подзадачи лист.png" alt=""><figcaption></figcaption></figure>
{% endtab %}
{% endtabs %}

“_Вкл/Выкл_” – вы можете включить и отключить подзадачи. Выключенные подзадачи не будут выполняться.

“Название” – имя вашей подзадачи. Для Visual Studio в имени не должно быть пробелов, так как имя задачи совпадает с названием класса, а классы пишутся в CamelCase.

“_Режим работы_” – подзадачи могут выполняться одним или всеми аккаунтами.

* Все аккаунты – подзадача будет выполняться каждым аккаунтом. К примеру, поиск капчи на странице или проверка наличия аватарки должны осуществляться для каждого аккаунта.
* Один аккаунт – подзадача будет назначена одному аккаунту, и только он будет ее выполнять. К примеру, вывод информации в лог, имеющий общий характер.
* Один аккаунт с ожиданием – все аккаунты будут ждать до тех пор, пока один аккаунт не выполнит подзадачу. К примеру, в начале первой сессии один аккаунт приводит к дефолту эксель файлы, и только после подготовки файлов остальные аккаунты начинают работу.

“_Начать_” – с какой сессии начать выполнение подзадачи. Можно начать как с первой, так и последней сессии.

{% hint style="info" %}
* Сессия начинается с 1 (0 не допустим).
* \-1 чтобы начинать на последней сессии.
{% endhint %}

“_Закончить_” – на какой сессии закончить выполнение. Можно закончить как на первой, так и на последней сессии. Проверьте, сколько сессий в расчетах эмуляции на листе “Эмуляция”, или в специальном информационном поле , чтобы понять на какой сессии закончить.

{% hint style="info" %}
* 1, чтобы закончить на первой сессии.
* &#x20;\-1, чтобы заканчивать на последней сессии.
{% endhint %}

## <mark style="color:blue;">Aгоритм создания подзадач</mark>

1. Определяем, когда необходимо выполнить подзадачу: в начале сессии, до задачи, после задачи, в конце сессии.
2. Выбираем, подзадачу должен выполнять один аккаунт или каждый.
3. Выбираем, с какой сессии начать и на какой сессии закончить.
4. Пишем задачи в PM или VS.

## <mark style="color:blue;">Примеры подзадач</mark>

Рассмотрим примеры 8 подзадач, при условии что эмулятор настроен на 6 сессий работы с каждый аккаунтом, это означает что подзадачи будут отрабатывать вначале или в конце сессий, так и в начале или конце задач, которые выполняются внутри сессии.

### <mark style="color:red;">До сессии</mark>

1. Подзадача будет выполняться 1 аккаунтом  до сессии, начиная с первой сессии и закончит в конце первой сессии, то есть в начале второй сессии выполняться уже не будет, как и в оставшихся сессиях. Остальные аккаунты будут ждать, пока она выполнится.

<figure><img src="../../../.gitbook/assets/image (25).png" alt=""><figcaption></figcaption></figure>

2. Подзадача будет выполняться 1 аккаунтом  до сессии, начиная с первой сессии и закончит в конце третьей сессии, то есть в начале четвертой сессии выполняться уже не будет, как и в оставшихся сессиях. Остальные аккаунты будут ждать, пока она выполнится.

<figure><img src="../../../.gitbook/assets/image (26).png" alt=""><figcaption></figcaption></figure>

3. Подзадача будет выполняться каждым аккаунтом до сессии, начиная с первой сессии до последней.

<figure><img src="../../../.gitbook/assets/image (27).png" alt=""><figcaption></figcaption></figure>

### <mark style="color:red;">До задачи</mark>

4. Подзадача будет выполняться до каждой задачи 1 аккаунтом, начиная с 3 сессии до последней.

<figure><img src="../../../.gitbook/assets/image (28).png" alt=""><figcaption></figcaption></figure>

5. Подзадача будет выполняться каждым аккаунтом до каждой задачи, начиная со второй сессии и закончит в конце пятой сессии, то есть в начале четвертой сессии выполняться уже не будет, как и в оставшихся сессиях.

<figure><img src="../../../.gitbook/assets/image (29).png" alt=""><figcaption></figcaption></figure>

### <mark style="color:red;">После задачи</mark>

6. Подзадача будет выполняться 1 аккаунтом после каждой задачи, начиная с первой сессии до последней.

<figure><img src="../../../.gitbook/assets/image (30).png" alt=""><figcaption></figcaption></figure>

### <mark style="color:red;">После сессии</mark>

7. Подзадача будет выполняться каждым аккаунтом после сессии, начиная с первой сессии до последней.

<figure><img src="../../../.gitbook/assets/image (31).png" alt=""><figcaption></figcaption></figure>

8. Подзадача будет выполняться каждым аккаунтом после сессии, начиная с третьей сессии до последней.

<figure><img src="../../../.gitbook/assets/image (32).png" alt=""><figcaption></figcaption></figure>

{% hint style="info" %}
* Подзадачи не обязательны в отличие от задач. Подзадачи можно отключить не только по отдельности, а полностью во внутренних настройках фермы.
* Количество подзадач не ограничено.
{% endhint %}

{% hint style="warning" %}
* Подзадачи **всегда** увеличивают время работы эмулятора, если подзадачи будут выполняться долго, то сессии могут затянуться, а количество выполненных задач будет сокращено.&#x20;
* Подзадачи должны быть максимально быстрыми и по возможности не осуществлять действий с браузером, **так как они не учувствуют в расчете параметров эмулирования**, и все расчеты эмуляции не учитывают время на их выполнение. Эмулятор считает только количество задач.
{% endhint %}
